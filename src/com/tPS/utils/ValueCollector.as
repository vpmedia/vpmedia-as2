/** * COKE ZERO ValueCollector * @author	tPS * @version 1 **/import mx.utils.Delegate; class com.tPS.utils.ValueCollector{	private var valueSource:Object;	private var values:Array;	static private var sampleFreq:Number = 10;	private var sampleInterval:Number;			function ValueCollector($src:Object){		valueSource = $src;		init();	}		private function init():Void{		values = [0];	}		public function start():Void{		trace("vc: start");		sampleInterval = setInterval(Delegate.create(this,update),sampleFreq);	}		public function kill():Void{		clearInterval(sampleInterval);	}		public function update():Void{		values.push(valueSource.getValue());	}		public function getAverage():Number{				var total:Number = 0;		var i:Number = values.length;		while(--i>-1){			total += values[i];		}		var ret:Number =  total/(values.length);		init();			return ret;	}		public function getAverageRounded():Number{				return Math.round(getAverage());	}		public function getPeak():Number{				values.sort();		values.reverse();		var peak:Number = values[0];		init();		return peak;	}		public function getPeakHold():Number{		var oldPk:Number = getPeak();		values.push(oldPk);		return oldPk;	}		public function getValues():Array{		return values;	}	}