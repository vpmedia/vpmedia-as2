/** * COKE ZERO Ngon * @author	tPS * @version 1 **/import com.tPS.draw.ShapeRounded;import com.tPS.draw.Shape;import com.tPS.draw.Point;import com.tPS.ui.util.DragItem; class com.tPS.draw.DragShapeRounded{ 	private var _rt:MovieClip;	private var ShapeRounded_mc:MovieClip;	private var draggers_mc:MovieClip;	private var points:Array;	private var mShape:ShapeRounded;	private var draggers:Array;		function DragShapeRounded($rt:MovieClip,$points:Array){		_rt = $rt;		ShapeRounded_mc = _rt.createEmptyMovieClip("ShapeRounded_mc",_rt.getNextHighestDepth());		draggers_mc = _rt.createEmptyMovieClip("draggers_mc",_rt.getNextHighestDepth());				points = $points;				draggers = [];				setup();	}		private function setup():Void{		render();		mShape = new ShapeRounded(ShapeRounded_mc,points,{col:0xFFFFFF,alpha:50});	}		private function render():Void{		var i:Number = -1;		while(++i < points.length){			var pnt_mc:MovieClip = draggers_mc.createEmptyMovieClip("dragger"+i,_rt.draggers_mc.getNextHighestDepth());			//var pnt_mc:MovieClip = draggers_mc.attachMovie("marker","dragger"+i,_rt.draggers_mc.getNextHighestDepth());			pnt_mc._x = points[i].x;			pnt_mc._y = points[i].y;			var pnt_shape:Shape = new Shape(pnt_mc);			var di:DragItem = new DragItem(pnt_mc);			di.addListener(this);			draggers.push(di);					}	}			private function onUpdatePos($dragItem:DragItem,$point:Point):Void{		var i:Number = -1;		points = [];		while(++i<draggers.length){			points[i] = draggers[i]._pos;		}		mShape._points = points;	}		function get _shape():MovieClip{		return ShapeRounded_mc;	}		function set _points($points:Array):Void{		points = $points;		var i:Number = draggers.length;		while(--i > -1){			draggers[i].removeListener(this);			draggers[i]._clip.removeMovieClip();		}		draggers = [];			render();				onUpdatePos();	}		function get _points():Array{		return points;	}				public function enable(isActive:Boolean):Void{		draggers_mc._visible = isActive;	}		public function toString():Void{		trace("Rouded Drag Shape: ");		var i:Number = -1;		while(++i < points.length){			points[i].toString();		}		trace("Rouded Drag Shape end");	}	}